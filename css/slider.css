main {
    margin: 100px auto;
    width: 600px;
    aspect-ratio: 16 / 9;
}

.slider {
    position: relative;
    overflow: hidden;
    height: 100%;
    --move: 1;
}

.slider > * {
    position: absolute;
    width: 100%;
    object-fit: cover;
    height: 100%;
    transition: all 250ms ease-in-out;
}

.slider > *:not(.cur):not(.prev):not(.next) {
    display: none;
}


.slider > .prev {
    transform: translateX(calc(var(--move) * -100%));
}

.slider > .next {
    transform: translateX(calc(var(--move) * 100%));
}

.slider > .cur {
    transform: translateX(0);
}

/* snap next slide to its position except for there are only two slides */
.slider.moving .next {
    /* calculate abs */
    --abs: max(2 - var(--item-count), var(--item-count) - 2);
    /* 1 if abs is not zero -> not exactly two slides */
    --not-two: min(1, var(--abs));
    /* 1 if not-two is zero -> exactly two slides */
    --two: calc(1 - var(--not-two));
    transition-duration: calc(var(--duration) * var(--two))
  }